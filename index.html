<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Iftar Countdown Hamburg</title>

  <!-- Stabil fÃ¼r Werbetafel: Reload alle 6h -->
  <meta http-equiv="refresh" content="21600">

  <style>
    :root{
      --gold1:#f6d78b;
      --gold2:#caa24a;
      --ink:rgba(0,0,0,.55);
      --glass:rgba(255,255,255,.08);
      --border:rgba(246,215,139,.22);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      color:#fff;
      background:#000;
    }

    /* A = contain: kein Zoom, ganzes Bild sichtbar */
    .bg{
      min-height:100vh;
      background:
        radial-gradient(900px 500px at 18% 12%, rgba(246,215,139,.18), transparent 60%),
        radial-gradient(900px 500px at 85% 20%, rgba(202,162,74,.16), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,.38), rgba(0,0,0,.70)),
        url("assets/bg.JPG") center/contain no-repeat;
      background-color:#000;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }

    .wrap{
      width:min(1050px, 100%);
      display:grid;
      grid-template-columns: 1.08fr .92fr;
      gap:16px;
    }

    .card{
      background:var(--ink);
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;
      backdrop-filter: blur(8px);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
    }

    .title{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin-bottom:6px;
    }

    h1{
      margin:0;
      font-size:34px;
      font-weight:850;
      letter-spacing:.4px;
      background: linear-gradient(90deg, var(--gold1), var(--gold2));
      -webkit-background-clip:text;
      background-clip:text;
      color: transparent;
    }

    .loc{
      font-size:13px;
      opacity:.92;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: rgba(255,255,255,.05);
      white-space:nowrap;
    }

    .sub{
      margin-top:4px;
      margin-bottom:12px;
      font-size:14px;
      opacity:.9;
    }

    .grid{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }

    .unit{
      width:110px;
      padding:12px 10px;
      border:1px solid var(--border);
      border-radius:14px;
      background: var(--glass);
    }

    .val{
      font-size:42px;
      font-weight:900;
      line-height:1;
      display:block;
      letter-spacing:.5px;
      text-shadow: 0 0 18px rgba(246,215,139,.12);
    }

    .label{
      font-size:12px;
      opacity:.85;
    }

    .next{
      margin-top:10px;
      font-size:15px;
      opacity:.95;
    }

    .quoteHead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:8px;
    }

    .badge{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:8px 12px;
      border:1px solid var(--border);
      border-radius:999px;
      background: rgba(255,255,255,.06);
      font-weight:800;
      letter-spacing:.2px;
      font-size:13px;
    }

    .quoteType{ font-size:12px; opacity:.85; }

    .quoteText{
      font-size:18px;
      line-height:1.38;
      margin:10px 0 0;
      white-space:pre-wrap;
    }

    .quoteRef{
      margin-top:10px;
      font-size:13px;
      opacity:.78;
    }

    .foot{
      margin-top:10px;
      opacity:.65;
      font-size:12px;
    }

    @media (max-width: 900px){
      .wrap{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="bg">
    <div class="wrap">

      <!-- Countdown -->
      <div class="card">
        <div class="title">
          <h1>Iftar Countdown</h1>
          <div class="loc">Hamburg (IGMG)</div>
        </div>

        <div class="sub">Ramadan 1447 Â· NÃ¤chster Iftar Countdown</div>

        <div class="grid">
          <div class="unit"><span class="val" id="d">00</span><span class="label">Tage</span></div>
          <div class="unit"><span class="val" id="h">00</span><span class="label">Std</span></div>
          <div class="unit"><span class="val" id="m">00</span><span class="label">Min</span></div>
          <div class="unit"><span class="val" id="s">00</span><span class="label">Sek</span></div>
        </div>

        <div class="next" id="nextIftarText"></div>
        <div class="foot">Audio: Fully Kiosk â†’ â€žMedia playback requires user gestureâ€œ = OFF</div>
      </div>

      <!-- Dua / Hadith / Reminder -->
      <div class="card">
        <div class="quoteHead">
          <div class="badge">
            <span id="quoteIcon">ðŸ¤²</span>
            <span id="quoteTitle">Bitgebet</span>
          </div>
          <div class="quoteType" id="quoteCounter">1 / 30</div>
        </div>

        <div class="quoteText" id="quoteText"></div>
        <div class="quoteRef" id="quoteRef"></div>
      </div>

    </div>
  </div>

  <!-- Audio-Datei: assets/ezan.mp3 -->
  <audio id="ezan" src="assets/ezan.mp3" preload="auto"></audio>

<script>
  const TZ = "Europe/Berlin";

  // IGMG Hamburg (DE) und Ã‡evresi â€“ Ramadan 1447 | 2026 (Iftar/AkÅŸam)
  const IFTAR_TIMES = [
    "2026-02-19T17:44:00","2026-02-20T17:46:00","2026-02-21T17:48:00","2026-02-22T17:50:00",
    "2026-02-23T17:51:00","2026-02-24T17:53:00","2026-02-25T17:55:00","2026-02-26T17:57:00",
    "2026-02-27T17:59:00","2026-02-28T18:01:00","2026-03-01T18:03:00","2026-03-02T18:05:00",
    "2026-03-03T18:07:00","2026-03-04T18:09:00","2026-03-05T18:11:00","2026-03-06T18:13:00",
    "2026-03-07T18:15:00","2026-03-08T18:16:00","2026-03-09T18:18:00","2026-03-10T18:20:00",
    "2026-03-11T18:22:00","2026-03-12T18:24:00","2026-03-13T18:26:00","2026-03-14T18:28:00",
    "2026-03-15T18:30:00","2026-03-16T18:31:00","2026-03-17T18:33:00","2026-03-18T18:35:00",
    "2026-03-19T18:37:00"
  ];

  // 30 ruhige Inhalte (kurz, Ã¶ffentlichkeitstauglich)
  const ROTATING = [
    {icon:"ðŸ¤²", title:"Bitgebet", text:"AllÄhumma innÄ« laka á¹£umtu wa Ê¿alÄ rizqika aftartu.", ref:"â€žFÃ¼r Dich habe ich gefastet â€“ mit Deiner Versorgung breche ich das Fasten.â€œ"},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"RabbanÄ ÄtinÄ fid-dunyÄ á¸¥asanah wa fil-Äkhirati á¸¥asanah.", ref:"â€žUnser Herr, gib uns Gutes im Diesseits und im Jenseits.â€œ"},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"AllÄhumma innaka Ê¿afuwwun tuá¸¥ibbul-Ê¿afwa faÊ¿fu Ê¿annÄ.", ref:"â€žDu liebst Vergebung â€“ vergib uns.â€œ"},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"O Allah, nimm unser Fasten und unsere Gebete an.", ref:""},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"O Allah, segne unser Iftar und unsere Familien.", ref:""},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"O Allah, schenke uns Gesundheit, Geduld und Standhaftigkeit.", ref:""},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"O Allah, fÃ¼lle unsere Herzen mit Licht und Ruhe.", ref:""},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"O Allah, erleichtere allen BedÃ¼rftigen ihre Lage.", ref:""},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"O Allah, schenke uns aufrichtige Dankbarkeit.", ref:""},
    {icon:"ðŸ¤²", title:"Bitgebet", text:"O Allah, mache unser Ende gut.", ref:""},

    {icon:"ðŸ“œ", title:"Hadith", text:"Das Fasten ist ein Schutzschild.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Die Taten werden nach den Absichten beurteilt.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Ein gutes Wort ist Wohltat.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Barmherzigkeit wird denen erwiesen, die barmherzig sind.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Gutes Tun bringt Segen.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Geduld ist Licht.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Dankbarkeit vermehrt die Gaben.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Vergebung suchen bringt Ruhe ins Herz.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Sanftmut verschÃ¶nert jede Sache.", ref:""},
    {icon:"ðŸ“œ", title:"Hadith", text:"Ein LÃ¤cheln ist Wohltat.", ref:""},

    {icon:"âœ¨", title:"Ramadan", text:"Ramadan ist Zeit fÃ¼r Ruhe, Fokus und Herzreinigung.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"Die Minuten vor Iftar: Dankbarkeit, Dua, leiser Moment.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"Ein kleines Dua kann GroÃŸes verÃ¤ndern.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"Teile Iftar â€“ teile Segen.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"Heute: weniger Eile, mehr Bewusstsein.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"Gutes Verhalten ist eine starke Form von Gottesdienst.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"Bewahre Ruhe â€“ Ramadan ist ein Trainingsmonat.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"FÃ¼lle deinen Tag mit guten Absichten.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"Vergebung suchen. Frieden im Herzen halten.", ref:""},
    {icon:"âœ¨", title:"Ramadan", text:"MÃ¶ge dein Iftar gesegnet sein.", ref:""}
  ];

  let playedForTarget = null;

  function nowInTZms(timeZone) {
    const parts = new Intl.DateTimeFormat("en-GB", {
      timeZone,
      year:"numeric", month:"2-digit", day:"2-digit",
      hour:"2-digit", minute:"2-digit", second:"2-digit",
      hour12:false
    }).formatToParts(new Date());
    const get = (t) => parts.find(p => p.type === t).value;
    const iso = `${get("year")}-${get("month")}-${get("day")}T${get("hour")}:${get("minute")}:${get("second")}`;
    return new Date(iso).getTime();
  }

  function findNextTarget(nowMs) {
    for (const t of IFTAR_TIMES) {
      const ms = new Date(t).getTime();
      if (ms > nowMs) return ms;
    }
    return null;
  }

  function formatTarget(targetMs) {
    return new Intl.DateTimeFormat("de-DE", {
      timeZone: TZ,
      weekday:"short",
      day:"2-digit", month:"2-digit", year:"numeric",
      hour:"2-digit", minute:"2-digit",
      hour12:false
    }).format(new Date(targetMs));
  }

  function updateCountdown() {
    const nowMs = nowInTZms(TZ);
    const targetMs = findNextTarget(nowMs);

    if (!targetMs) {
      document.getElementById("nextIftarText").textContent = "Keine weiteren Iftar-Zeiten in der Liste.";
      return;
    }

    const diff = targetMs - nowMs;
    document.getElementById("nextIftarText").textContent = "NÃ¤chster Iftar: " + formatTarget(targetMs);

    // Iftar erreicht -> Ezan einmalig
    if (diff <= 0) {
      if (playedForTarget !== targetMs) {
        playedForTarget = targetMs;
        const audio = document.getElementById("ezan");
        if (audio) {
          audio.currentTime = 0;
          audio.play().catch(()=>{});
        }
      }
      return;
    }

    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff / (1000*60*60)) % 24);
    const m = Math.floor((diff / (1000*60)) % 60);
    const s = Math.floor((diff / 1000) % 60);

    document.getElementById("d").textContent = d;
    document.getElementById("h").textContent = String(h).padStart(2,"0");
    document.getElementById("m").textContent = String(m).padStart(2,"0");
    document.getElementById("s").textContent = String(s).padStart(2,"0");
  }

  // Quote Rotation (ruhig: 60s)
  let qIndex = 0;
  function renderQuote() {
    const q = ROTATING[qIndex % ROTATING.length];
    document.getElementById("quoteIcon").textContent = q.icon;
    document.getElementById("quoteTitle").textContent = q.title;
    document.getElementById("quoteText").textContent = q.text;
    document.getElementById("quoteRef").textContent = q.ref || "";
    document.getElementById("quoteCounter").textContent =
      `${(qIndex % ROTATING.length) + 1} / ${ROTATING.length}`;
    qIndex++;
  }

  updateCountdown();
  setInterval(updateCountdown, 1000);

  renderQuote();
  setInterval(renderQuote, 60000);
</script>

</body>
</html>

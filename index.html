<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Iftar Countdown Hamburg</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#0b1220; color:#fff; }
    .card{
      min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center;
      text-align:center; padding:24px;
    }
    h1{ margin:0 0 10px; font-size:36px; }
    .sub{ opacity:.85; margin-bottom:24px; }
    .grid{ display:flex; gap:14px; flex-wrap:wrap; justify-content:center; }
    .unit{
      width:90px; padding:14px 10px; border:1px solid rgba(255,255,255,.2);
      border-radius:14px; background:rgba(255,255,255,.06);
    }
    .val{ font-size:34px; font-weight:700; display:block; }
    .label{ font-size:12px; opacity:.8; }
    #nextIftarText{ margin-top:18px; opacity:.9; font-size:14px; }
  </style>
</head>
<body>

  <div class="card">
    <h1>Iftar Countdown</h1>
    <div class="sub">Hamburg (IGMG)</div>

    <div class="grid">
      <div class="unit"><span class="val" id="d">00</span><span class="label">Tage</span></div>
      <div class="unit"><span class="val" id="h">00</span><span class="label">Std</span></div>
      <div class="unit"><span class="val" id="m">00</span><span class="label">Min</span></div>
      <div class="unit"><span class="val" id="s">00</span><span class="label">Sek</span></div>
    </div>

    <div id="nextIftarText"></div>
  </div>

<script>
  // IGMG Hamburg (DE) und Çevresi – Ramadan 1447 | 2026 (Iftar/Akşam)
  // Quelle: https://imsakiye.igmg.org/... stadt=20083
  const TZ = "Europe/Berlin";

  const IFTAR_TIMES = [
    "2026-02-19T17:44:00",
    "2026-02-20T17:46:00",
    "2026-02-21T17:48:00",
    "2026-02-22T17:50:00",
    "2026-02-23T17:51:00",
    "2026-02-24T17:53:00",
    "2026-02-25T17:55:00",
    "2026-02-26T17:57:00",
    "2026-02-27T17:59:00",
    "2026-02-28T18:01:00",
    "2026-03-01T18:03:00",
    "2026-03-02T18:05:00",
    "2026-03-03T18:07:00",
    "2026-03-04T18:09:00",
    "2026-03-05T18:11:00",
    "2026-03-06T18:13:00",
    "2026-03-07T18:15:00",
    "2026-03-08T18:16:00",
    "2026-03-09T18:18:00",
    "2026-03-10T18:20:00",
    "2026-03-11T18:22:00",
    "2026-03-12T18:24:00",
    "2026-03-13T18:26:00",
    "2026-03-14T18:28:00",
    "2026-03-15T18:30:00",
    "2026-03-16T18:31:00",
    "2026-03-17T18:33:00",
    "2026-03-18T18:35:00",
    "2026-03-19T18:37:00"
  ];

  function nowInTZms(timeZone) {
    const parts = new Intl.DateTimeFormat("en-GB", {
      timeZone,
      year:"numeric", month:"2-digit", day:"2-digit",
      hour:"2-digit", minute:"2-digit", second:"2-digit",
      hour12:false
    }).formatToParts(new Date());
    const get = (t) => parts.find(p => p.type === t).value;
    const iso = `${get("year")}-${get("month")}-${get("day")}T${get("hour")}:${get("minute")}:${get("second")}`;
    return new Date(iso).getTime();
  }

  function findNextTarget(nowMs) {
    for (const t of IFTAR_TIMES) {
      const ms = new Date(t).getTime();
      if (ms > nowMs) return ms;
    }
    return null;
  }

  function formatTarget(targetMs) {
    return new Intl.DateTimeFormat("de-DE", {
      timeZone: TZ,
      weekday:"short",
      day:"2-digit", month:"2-digit", year:"numeric",
      hour:"2-digit", minute:"2-digit",
      hour12:false
    }).format(new Date(targetMs));
  }

  function update() {
    const nowMs = nowInTZms(TZ);
    const targetMs = findNextTarget(nowMs);

    if (!targetMs) {
      document.querySelector(".card").innerHTML =
        "<h1>Ramazan Mübarek!</h1><p>Keine weiteren Iftar-Zeiten in der Liste.</p>";
      return;
    }

    const diff = targetMs - nowMs;

    const nextEl = document.getElementById("nextIftarText");
    if (nextEl) nextEl.textContent = "Nächster Iftar: " + formatTarget(targetMs);

    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff / (1000*60*60)) % 24);
    const m = Math.floor((diff / (1000*60)) % 60);
    const s = Math.floor((diff / 1000) % 60);

    document.getElementById("d").textContent = d;
    document.getElementById("h").textContent = String(h).padStart(2,"0");
    document.getElementById("m").textContent = String(m).padStart(2,"0");
    document.getElementById("s").textContent = String(s).padStart(2,"0");
  }

  setInterval(update, 1000);
  update();
</script>

</body>
</html>
